### THIS FILE IS MANAGED BY fermilab-conf_system-logger-rsyslog ###
###      YOUR CHANGES HERE WILL BE REVERTED BY THIS PACAKGE     ###

#
# This will send any log message to clogger.fnal.gov but it will
# not prevent any local processing of log messages for storage in
# /var/log/ or block if/when clogger.fnal.gov is unreachable.
#

module(load="builtin:omfwd"
       Template="RSYSLOG_TraditionalForwardFormat"
)
# NOTE: rsyslog may complain about a lack of client certificate,
#       clogger doesn't use client certificates
*.*  action(target="clogger.fnal.gov" port="6514" protocol="tcp"
            type="omfwd"
            action.resumeinterval="1000"
            action.resumeRetryCount="-1"
            queue.filename="clogger.fnal.gov"
            queue.type="linkedList"
            queue.saveOnShutdown="on"
            queue.size="10000"
            queue.maxDiskSpace="1g"
            queue.dequeueBatchSize="128"
            queue.minDequeueBatchSize="3"
            StreamDriver="gtls"
            StreamDriverMode="1"
            StreamDriverAuthMode="anon"
            StreamDriver.CAFile="/etc/clogger_syslog_ca.pem"
)
